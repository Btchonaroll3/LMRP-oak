<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrollable Map with Points</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        #container {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
            background-color: #f0f0f0;
        }

        #image-container {
            width: 100%;
            height: 100%;
            position: absolute;
            background-image: url('images/housing.jpg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transform-origin: 0 0; /* Ensure the image scales from the top-left corner */
        }

        .point {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: red;
            border-radius: 50%;
            cursor: pointer;
        }

        .label {
            position: absolute;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 2px 5px;
            font-size: 14px;
            display: none;
        }

        .popup {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            display: none;
            z-index: 999;
        }
    </style>
</head>
<body>

<div id="container">
    <div id="image-container"></div>
    <div class="popup" id="popup"></div>
</div>

<script>
    const imageContainer = document.getElementById('image-container');
    const popup = document.getElementById('popup');
    let scale = 1.5;  // Initial zoom set to 150%
    let offsetX = 0;
    let offsetY = 0;
    let points = [];

    // Enable scrolling to pan the image
    imageContainer.addEventListener('mousedown', (event) => {
        event.preventDefault();
        const startX = event.clientX;
        const startY = event.clientY;
        const startOffsetX = offsetX;
        const startOffsetY = offsetY;

        function onMouseMove(moveEvent) {
            offsetX = startOffsetX + moveEvent.clientX - startX;
            offsetY = startOffsetY + moveEvent.clientY - startY;
            updateImage();
        }

        function onMouseUp() {
            window.removeEventListener('mousemove', onMouseMove);
            window.removeEventListener('mouseup', onMouseUp);
        }

        window.addEventListener('mousemove', onMouseMove);
        window.addEventListener('mouseup', onMouseUp);
    });

    imageContainer.addEventListener('click', (event) => {
        const mouseX = (event.clientX - offsetX) / scale;
        const mouseY = (event.clientY - offsetY) / scale;
        const point = { x: mouseX, y: mouseY, label: '', imageUrl: '' };

        // Prompt for label and image URL
        const label = prompt('Enter label for this point:');
        if (label) point.label = label;
        const imageUrl = prompt('Enter image URL (optional):');
        if (imageUrl) point.imageUrl = imageUrl;

        points.push(point);
        createPoint(point);
    });

    function createPoint(point) {
        const pointElement = document.createElement('div');
        pointElement.classList.add('point');
        pointElement.style.left = `${point.x * scale + offsetX - 10}px`;
        pointElement.style.top = `${point.y * scale + offsetY - 10}px`;

        const labelElement = document.createElement('div');
        labelElement.classList.add('label');
        labelElement.innerText = point.label;
        labelElement.style.left = `${point.x * scale + offsetX + 15}px`;
        labelElement.style.top = `${point.y * scale + offsetY - 10}px`;

        pointElement.addEventListener('click', () => {
            if (point.imageUrl) {
                popup.innerHTML = `<img src="${point.imageUrl}" alt="Image" style="width: 200px; height: 200px;">`;
            }
            popup.innerHTML += `<p>${point.label}</p>`;
            popup.style.left = `${point.x * scale + offsetX + 20}px`;
            popup.style.top = `${point.y * scale + offsetY + 20}px`;
            popup.style.display = 'block';
        });

        imageContainer.appendChild(pointElement);
        imageContainer.appendChild(labelElement);
    }

    function updateImage() {
        imageContainer.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
        updatePoints();
    }

    // Update the position of points based on the current scale and position
    function updatePoints() {
        const pointElements = document.querySelectorAll('.point');
        const labelElements = document.querySelectorAll('.label');
        points.forEach((point, index) => {
            const pointElement = pointElements[index];
            const labelElement = labelElements[index];
            pointElement.style.left = `${point.x * scale + offsetX - 10}px`;
            pointElement.style.top = `${point.y * scale + offsetY - 10}px`;
            labelElement.style.left = `${point.x * scale + offsetX + 15}px`;
            labelElement.style.top = `${point.y * scale + offsetY - 10}px`;
        });
    }

    // Initialize the image with the correct zoom level
    updateImage();

</script>

</body>
</html>
